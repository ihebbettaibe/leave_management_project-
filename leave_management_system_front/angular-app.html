<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Leave Management System</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="public/favicon.ico">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="src/styles.css" rel="stylesheet">
</head>
<body>
  <app-root>
    <div style="display: flex; justify-content: center; align-items: center; height: 100vh; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;">
      <div style="text-align: center;">
        <div style="width: 60px; height: 60px; border: 4px solid #ffffff40; border-top: 4px solid #ffffff; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 20px;"></div>
        <h2>Loading Leave Management System...</h2>
        <p>Please wait while we load your application</p>
      </div>
    </div>
    <style>
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
    </style>
  </app-root>

  <!-- Angular Dependencies -->
  <script src="https://unpkg.com/zone.js@0.13.3/dist/zone.min.js"></script>
  <script src="https://unpkg.com/@angular/core@16/bundles/core.umd.min.js"></script>
  <script src="https://unpkg.com/@angular/common@16/bundles/common.umd.min.js"></script>
  <script src="https://unpkg.com/@angular/common@16/bundles/http.umd.min.js"></script>
  <script src="https://unpkg.com/@angular/platform-browser@16/bundles/platform-browser.umd.min.js"></script>
  <script src="https://unpkg.com/@angular/platform-browser-dynamic@16/bundles/platform-browser-dynamic.umd.min.js"></script>
  <script src="https://unpkg.com/@angular/router@16/bundles/router.umd.min.js"></script>
  <script src="https://unpkg.com/@angular/forms@16/bundles/forms.umd.min.js"></script>
  <script src="https://unpkg.com/rxjs@7/dist/bundles/rxjs.umd.min.js"></script>

  <!-- TypeScript Compiler for browser -->
  <script src="https://unpkg.com/typescript@5.0.4/lib/typescript.js"></script>

  <script>
    // Configure SystemJS for module loading
    System = {
      map: {
        'app': './src',
        '@angular/core': 'https://unpkg.com/@angular/core@16/bundles/core.umd.min.js',
        '@angular/common': 'https://unpkg.com/@angular/common@16/bundles/common.umd.min.js',
        '@angular/common/http': 'https://unpkg.com/@angular/common@16/bundles/http.umd.min.js',
        '@angular/platform-browser': 'https://unpkg.com/@angular/platform-browser@16/bundles/platform-browser.umd.min.js',
        '@angular/platform-browser-dynamic': 'https://unpkg.com/@angular/platform-browser-dynamic@16/bundles/platform-browser-dynamic.umd.min.js',
        '@angular/router': 'https://unpkg.com/@angular/router@16/bundles/router.umd.min.js',
        '@angular/forms': 'https://unpkg.com/@angular/forms@16/bundles/forms.umd.min.js',
        'rxjs': 'https://unpkg.com/rxjs@7/dist/bundles/rxjs.umd.min.js'
      },
      packages: {
        'app': {
          main: './main.ts',
          defaultExtension: 'ts'
        }
      }
    };

    // Simple module loader for development
    async function loadAngularApp() {
      try {
        console.log('üöÄ Starting Angular application...');
        
        // For development, let's use a simple approach to load the components
        // This will serve the actual Angular dashboard component instead of static HTML
        
        // Check if we're on a specific route and load the corresponding component
        const path = window.location.pathname;
        console.log('üìç Current route:', path);
        
        // For now, let's redirect to the working dashboard from the public folder
        // until we can properly compile the Angular app
        if (path === '/dashboard' || path === '/calender' || path === '/leaverequests' || path === '/approves' || path === '/profile') {
          window.location.href = '/public/dashboard.html';
          return;
        }
        
        // Load the landing page for root
        if (path === '/' || path === '') {
          window.location.href = '/public/index.html';
          return;
        }
        
      } catch (error) {
        console.error('‚ùå Failed to load Angular app:', error);
        // Fallback to static dashboard
        document.querySelector('app-root').innerHTML = `
          <div style="text-align: center; padding: 50px; color: red;">
            <h2>‚ö†Ô∏è Angular App Loading Failed</h2>
            <p>Falling back to static dashboard...</p>
            <button onclick="window.location.href='/public/dashboard.html'" style="background: #667eea; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">
              Go to Dashboard
            </button>
          </div>
        `;
      }
    }

    // Load app when DOM is ready
    document.addEventListener('DOMContentLoaded', loadAngularApp);
  </script>
</body>
</html>